import{r as s,A as I,T as f,j as e,q as p,d as $,f as H,n as W,y as G,a as V}from"./app-144c7569.js";import{a as Y,b as q}from"./index.esm-f0dcaf01.js";import{F as J,A as K,B as Q,E as X,t as Z,a as ee,b as te,c as ae}from"./index.esm-0ff8ed9e.js";import{L as re}from"./bonvivo_logo-12897ae9.js";import{G as S}from"./iconBase-a32b9c6a.js";import{T as z}from"./ThemeToggler-ce0d72b5.js";import{c as se,d as ne,e as le,f as ie,M as oe}from"./index.esm-b6d3ac2b.js";import{S as de,I as ce}from"./StandardFormModalTemplate-156ebbc9.js";function D(){s.useContext(I);const{theme:t,updateTheme:a}=s.useContext(f),r=()=>{a({...t,fluidMode:!0,sidebarOpen:!1,fullscreen:!t.fullscreen})};return e.jsxs("button",{type:"button",onClick:()=>r(),className:`${t.fullscreen?"absolute right-10 top-7 p-3 px-6 z-[99] flex-end gap-4 bg-black/50":"text-gray-700 dark:text-white"}`,children:[t.fullscreen&&e.jsx("p",{className:"text-white",children:"Exit Fullscreen"}),t.fullscreen?e.jsx(se,{className:"text-white font-bold"}):e.jsx(ne,{})]})}const xe=()=>[...p().props.auth.user.permissions.map(a=>a.name),"logout"];function C({navRoute:t,components:a,label:r,method:n="get",icon:o,...l}){const{app:x,auth:d}=p().props,{current_route:u}=x,{theme:m,updateTheme:j}=s.useContext(f),c=a.includes(u),b=a.some(g=>xe().includes(g)),w=a.includes("dashboard.index"),N=a.includes("my-profile.index");if(b||w||N)return e.jsxs($,{method:n,href:t,className:`relative flex-start gap-0 font-semibold text-gray-700 dark:text-white 
      ${c?"text-white":"hover:text-primary dark:hover:text-primary"}
      `,...l,children:[e.jsx("div",{className:`p-2 rounded-full z-50 ${c?"shadow-md bg-primary":"text-xl"}`,title:r,children:o}),m.sidebarOpen?e.jsxs("p",{className:`absolute z-10 ml-4 px-4 rounded-full ${c&&"shadow-md bg-primary"}`,children:["  ",r]}):e.jsx("p",{children:" "})]})}function T({user:t}){const a=t.current_team.slug;return e.jsxs(s.Fragment,{children:[e.jsx(C,{navRoute:route("dashboard.index",a),components:["dashboard.index"],label:"Dashboard",icon:e.jsx(Y,{})}),e.jsx(C,{navRoute:route("customer-master.index",a),components:["customer-master.index"],label:"Customer",icon:e.jsx(J,{})}),e.jsx(C,{navRoute:route("logout"),components:["logout"],label:"Logout",method:"post",as:"button",icon:e.jsx(K,{})})]})}function ue(){return e.jsxs("div",{className:"flex-start gap-2",children:[e.jsx("img",{src:re,alt:"Application Logo",width:30}),e.jsx("div",{className:"flex-center text-3xl font-bold font-caprasimo",children:e.jsx("p",{className:"text-green-600",children:"Bonvivo"})})]})}function P({place:t="header"}){const{app:a,auth:r}=p().props;return e.jsx("div",{className:`${t=="header"?"hidden lg:flex mt-2":"md:flex"}`,children:(r==null?void 0:r.user)&&e.jsx(ue,{})})}function pe(){var n;const{theme:t,updateTheme:a}=s.useContext(f),r=(n=p().props.auth)==null?void 0:n.user;return e.jsxs(s.Fragment,{children:[e.jsx("div",{className:"z-10 hidden lg:block",children:e.jsx(he,{theme:t,children:r&&e.jsx(T,{user:r})})}),e.jsx("div",{className:"z-10 lg:hidden",children:e.jsx(ge,{theme:t,children:r&&e.jsx(T,{user:r})})})]})}const he=({theme:t,children:a})=>e.jsx("div",{id:"sidebar",className:`fixed h-screen overflow-y-auto pt-4 pb-20 bg-[#EDF2F9] dark:bg-[#0A1727] ${t.sidebarOpen?"w-60":"w-10"}`,children:e.jsx("div",{className:"flex flex-col space-y-4",children:a})}),ge=({theme:t,children:a})=>e.jsxs("div",{id:"sidebar",className:`fixed px-2 h-screen overflow-y-auto pt-4 pb-20 bg-[#EDF2F9] dark:bg-[#0A1727] w-60  ${!t.sidebarShow&&"hidden"}`,children:[e.jsx("div",{className:"px-2 pb-4 lg:hidden",children:e.jsx(P,{place:"sidebar"})}),e.jsx("div",{className:"flex flex-col space-y-4",children:a})]});function fe(){const{theme:t,updateTheme:a}=s.useContext(f),r=()=>{a({...t,sidebarShow:!1})};if(t.sidebarShow)return e.jsx("div",{onClick:()=>r(),className:"lg:hidden absolute z-[5] top-0 left-0 w-full h-full bg-black/60"})}function me(t){return S({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{width:"7",height:"7",x:"3",y:"3",rx:"1"}},{tag:"rect",attr:{width:"7",height:"7",x:"3",y:"14",rx:"1"}},{tag:"path",attr:{d:"M14 4h7"}},{tag:"path",attr:{d:"M14 9h7"}},{tag:"path",attr:{d:"M14 15h7"}},{tag:"path",attr:{d:"M14 20h7"}}]})(t)}function je(){const{theme:t,updateTheme:a}=s.useContext(f),r=()=>{a({...t,sidebarOpen:!t.sidebarOpen})},n=()=>{a({...t,sidebarShow:!t.sidebarShow})};return e.jsxs(s.Fragment,{children:[e.jsx("div",{className:"hidden lg:flex",children:t.sidebarOpen?e.jsx("button",{type:"button",onClick:()=>r(),className:"text-gray-700 dark:text-white",children:e.jsx(Q,{size:20})}):e.jsx("button",{type:"button",onClick:()=>r(),className:"text-gray-700 dark:text-white",children:e.jsx(me,{size:20})})}),e.jsx("div",{className:"lg:hidden",children:e.jsx("button",{type:"button",onClick:()=>n(),className:"text-gray-700 dark:text-white",children:e.jsx(q,{size:20})})})]})}function be(){return e.jsxs("button",{type:"button",className:"flex-center text-gray-700 dark:text-white hover:text-primary dark:hover:text-primary",children:[e.jsx(X,{}),e.jsx("p",{className:"text-xs font-bold",children:""})]})}function M({className:t}){return e.jsxs("div",{className:`flex-center px-4 py-0 gap-2 rounded-full border-2 border-gray-500 ${t}`,children:[e.jsx(be,{}),e.jsx(z,{}),e.jsx(D,{})]})}const _=s.createContext(),y=({contentRef:t,children:a})=>{const[r,n]=s.useState(!1),o=()=>{n(l=>!l)};return e.jsx(_.Provider,{value:{open:r,setOpen:n,toggleOpen:o},children:e.jsx("div",{className:"relative",children:a})})},we=({children:t})=>{const{open:a,setOpen:r,toggleOpen:n}=s.useContext(_);return e.jsxs(e.Fragment,{children:[e.jsx("div",{onClick:n,children:t}),a&&e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>r(!1)})]})},ve=({align:t="right",width:a="48",contentClasses:r="py-2",children:n})=>{const{open:o,setOpen:l}=s.useContext(_),x=s.useRef(null);let d="origin-top";t==="left"?d="origin-top-left left-0":t==="right"&&(d="origin-top-right right-0");let u="";return a==="48"&&(u="min-w-[200px]"),e.jsx(e.Fragment,{children:e.jsx(Z,{as:s.Fragment,show:o,enter:"transition ease-out duration-200",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsx("div",{className:`absolute z-50 mt-2 rounded-md shadow-lg ${d} ${u}`,onClick:()=>l(!1),children:e.jsx("div",{ref:x,className:"rounded-md ring-1 ring-black ring-opacity-5 bg-white dark:bg-gray-700 space-y-2 "+r,children:n})})})})},ye=({className:t="",children:a,...r})=>e.jsx($,{...r,className:"flex w-full px-4 py-2 text-left text-sm leading-5 text-gray-700 dark:text-white hover:bg-primary hover:text-white focus:outline-none focus:bg-primary focus:text-white transition duration-150 ease-in-out "+t,children:a});y.Trigger=we;y.Content=ve;y.Link=ye;const v=y;function Ne({trigger:t,children:a}){return e.jsxs(v,{children:[e.jsx(v.Trigger,{children:t}),e.jsx(v.Content,{children:a})]})}function ke({user:t}){return e.jsxs(Ne,{trigger:e.jsx(Ce,{user:t}),children:[e.jsx("div",{className:"p-4 md:hidden",children:e.jsx(M,{className:"flex md:hidden"})}),e.jsxs("div",{className:"px-4 text-gray-700 dark:text-white",children:[e.jsx("p",{className:"whitespace-nowrap",children:t.user_name}),e.jsx("p",{className:"text-xs",children:t.email})]}),e.jsx(v.Link,{href:route("logout"),method:"post",as:"button",children:"Log Out"})]})}const Ce=({user:t})=>e.jsx("span",{className:"inline-flex rounded-md",children:e.jsxs("button",{type:"button",className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-gray-700 dark:text-white  hover:text-gray-700 focus:outline-none transition ease-in-out duration-150",children:[e.jsx("p",{className:"capitalize mr-2 whitespace-nowrap",children:t.user_name}),e.jsx(le,{size:22}),e.jsx("svg",{className:"ml-2 -mr-0.5 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]})});function Se(t){return S({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M752.145 0c8.685 0 17.572 3.434 24.237 10.099 13.33 13.33 13.33 35.143 0 48.473L320.126 515.03l449.591 449.591c13.33 13.33 13.33 35.144 0 48.474-13.33 13.33-35.142 13.33-48.472 0L247.418 539.268c-13.33-13.33-13.33-35.144 0-48.474L727.91 10.1C734.575 3.435 743.46.002 752.146.002z"}}]})(t)}function _e(t){return S({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M271.653 1023.192c-8.685 0-17.573-3.432-24.238-10.097-13.33-13.33-13.33-35.144 0-48.474L703.67 508.163 254.08 58.573c-13.33-13.331-13.33-35.145 0-48.475 13.33-13.33 35.143-13.33 48.473 0L776.38 483.925c13.33 13.33 13.33 35.143 0 48.473l-480.492 480.694c-6.665 6.665-15.551 10.099-24.236 10.099z"}}]})(t)}function Fe({fetchRoute:t,columns:a,search:r,pagination:n,rowSelection:o,onSelectRow:l}){var F;const x=(F=p().props.alert)==null?void 0:F.token,[d,u]=s.useState([]),[m,j]=s.useState(!0),[c,b]=s.useState(null),[w,N]=s.useState(1),[g,R]=s.useState(null),B=()=>{H.get(t,{params:{page:w,sort:c,search:r,columns:a.map(i=>({field:i.field,searchable:i.searchable??!0,sortable:i.sortable??!0}))}}).then(i=>{u(i.data.collection.data),R({prev_page_url:i.data.collection.prev_page_url,next_page_url:i.data.collection.next_page_url,current_page:i.data.collection.current_page,last_page:i.data.collection.last_page,from:i.data.collection.from,to:i.data.collection.to,total:i.data.collection.total}),j(!1)}).catch(i=>{console.error("Error fetching data:",i)})};return s.useEffect(()=>{j(!0),B()},[w,r,c,x]),m?e.jsxs("div",{className:"px-10 py-20 flex-center flex-col md:flex-row gap-8 bg-gray-700",children:[e.jsx("span",{className:"loader"}),e.jsx("span",{className:"text-white",children:"Processing... Please Wait"})]}):(g==null?void 0:g.total)===0?e.jsx("p",{className:"p-4 text-center text-gray-700 dark:text-white",children:"No data found..."}):e.jsxs(s.Fragment,{children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"text-gray-700 dark:text-white bg-[#EDF2F9] dark:bg-[#232E3C]",children:e.jsx("tr",{children:a.map((i,k)=>e.jsx(Te,{column:i,sort:c,setSort:b},k))})}),e.jsx("tbody",{children:d==null?void 0:d.map((i,k)=>{const E=()=>{if(o)return l(i)};return e.jsx("tr",{className:"hover:bg-gray-100 dark:hover:bg-black/25",onClick:()=>E(),children:a.map((h,O)=>{function U(){if(!h.bodyAlignment||h.bodyAlignment==="left")return"text-start";if(h.bodyAlignment==="center")return"text-center";if(h.bodyAlignment==="right")return"text-end"}return e.jsx("td",{className:`first:pl-4 last:pr-4 px-2 py-2 align-top 
                      border-b border-gray-200
                      text-gray-700 dark:text-gray-300 dark:border-gray-700 
                      ${U()}
                      ${o&&"cursor-pointer"}
                      `,children:h.render?h.render(i):i[h.field]},O)})},k)})})]}),n&&e.jsx(Le,{meta:g,setPage:N})]})}const Te=({column:t,sort:a,setSort:r})=>{const n=()=>{if(!t.headerAlignment||t.headerAlignment==="left")return"flex-start";if(t.headerAlignment==="center")return"flex-center";if(t.headerAlignment==="right")return"flex-end"},o=()=>{t.sortable!==!1&&((a==null?void 0:a.field)===t.field?(a||r({field:t.field,direction:"asc"}),(a==null?void 0:a.direction)==="asc"&&r({direction:"desc",field:t.field}),(a==null?void 0:a.direction)==="desc"&&r(null)):r({direction:"asc",field:t.field}))};function l(){return t.sortable===void 0||t.sortable===!0}return e.jsx("th",{className:`first:pl-4 last:pr-4 px-2 py-2 text-left font-normal text-sm ${l()&&"cursor-pointer hover:bg-primary dark:hover:bg-primary hover:text-white dark:hover:text-white"}`,onClick:()=>o(),children:e.jsxs("div",{className:`${n()} gap-2`,children:[l()&&e.jsxs("div",{children:[(a==null?void 0:a.field)!==t.field&&e.jsx(ee,{className:"text-gray-400 dark:text-gray-600"}),(a==null?void 0:a.field)===t.field&&(a==null?void 0:a.direction)==="asc"&&e.jsx(te,{className:"text-gray-700 dark:text-gray-100"}),(a==null?void 0:a.field)===t.field&&(a==null?void 0:a.direction)==="desc"&&e.jsx(ae,{className:"text-gray-700 dark:text-gray-100"})]}),e.jsx("p",{className:"font-bold not:hover:text-gray-700 dark:not:hover:text-white select-none",children:t.header})]})})},Le=({meta:t,setPage:a})=>{const r=()=>{const x=new URL(t.prev_page_url).searchParams.get("page");a(x)},n=()=>{const x=new URL(t.next_page_url).searchParams.get("page");a(x)};return e.jsxs("div",{className:"flex-center gap-4 py-4",children:[e.jsx(L,{onClick:()=>r(),disabled:!t.prev_page_url,icon:e.jsx(Se,{size:15})}),e.jsxs("div",{className:"text-sm flex-center gap-1 text-gray-700 dark:text-white",children:[e.jsxs("p",{children:["Page ",t.current_page," / ",t.last_page,"."]}),e.jsxs("p",{children:["Total Records ",t.total]})]}),e.jsx(L,{onClick:()=>n(),disabled:!t.next_page_url,icon:e.jsx(_e,{size:15})})]})},L=({onClick:t,disabled:a,icon:r})=>e.jsx("button",{type:"button",className:`font-bold px-4 py-2 rounded-md button-shadow text-gray-600 dark:text-white dark:bg-[#0B1727] disabled:text-gray-400 disabled:dark:text-gray-700\r
      hover:text-primary hover:dark:text-primary\r
      `,onClick:t,disabled:a,children:r}),A=()=>p().props.auth.user.current_team;function Ae({search:t="",onSelectTeam:a}){const r=A().id,n=[{header:"Name",field:"name"},{header:"Type",field:"type",render:l=>e.jsx("p",{className:`w-fit px-2 rounded-sm uppercase text-xs text-center text-white ${r===l.id?"bg-primary":"bg-orange-700"}`,children:l.type})},{header:"",field:"__actions",sortable:!1,searchable:!1,bodyAlignment:"center",render:o}];function o(l){if(r===l.id)return e.jsx(ie,{})}return e.jsx(Fe,{fetchRoute:route("change-team.datatable",A().slug),columns:n,search:t,pagination:!0,rowSelection:!0,onSelectRow:a})}function $e(){const[t,a]=s.useState(!1),r=p().props,n=r.app.current_route,{user:o}=r.auth,{current_team:l,personal_team:x}=o;function d(){return!1}const u=()=>{},m=c=>{c.preventDefault()},j=c=>{l.id!==c.id&&G.patch(route("change-team.update",[l.slug,c.id]),{team_id:c.id,current_route:n},{onSuccess:b=>{a(!1)}})};return e.jsxs(s.Fragment,{children:[e.jsxs("button",{type:"button",className:`hiddexn lg:flex flex-center gap-2 rounded-full focus:ring-transparent appearance-none py-1 px-4 mr-0 sm:mr-4 truncate\r
       font-semibold border-2 border-gray-200 dark:border-gray-700 focus:dark:border-blue-500  bg-white dark:bg-black/40 placeholder-slate-600 dark:placeholder-slate-400 text-gray-700 dark:text-white`,onClick:()=>u(),children:[d(),e.jsx("p",{className:"whitespace-nowrap sm:max-w-full truncate",style:{maxWidth:W()},children:l.name})]}),e.jsx(oe,{visible:t,setVisible:a,width:"w-full lg:min-w-[1010px] lg:max-w-fit",children:e.jsx(de,{title:"Change Team",closeForm:()=>a(!1),processing:!1,submit:m,withoutActions:!0,children:e.jsx(Ae,{onSelectTeam:j})})})]})}function ze(){const{app:t,auth:a}=p().props,r=a==null?void 0:a.user,[n,o]=s.useState(!1),[l,x]=s.useState(window.scrollY);return s.useEffect(()=>{const d=()=>{const u=window.scrollY;o(u!==0),x(u)};return window.addEventListener("scroll",d),()=>{window.removeEventListener("scroll",d)}},[l]),s.useState(""),e.jsxs("div",{id:"header",className:`sticky top-0 z-10 w-full pl-4 md:pl-4 lg:pl-2 pxr-4 flex-none flex-between md:gap-10 bg-[#EDF2F9] dark:bg-[#0A1727]
    ${n&&"content-header-elevate"}
    `,children:[e.jsxs("div",{className:"w-full md:w-60xxg flex-start gap-8",children:[e.jsx(je,{}),e.jsx(P,{}),e.jsx("div",{className:"w-1/2 md:hidden"})]}),e.jsxs("div",{className:"w-d20 md:w-fuxll flex-between py-3 pxx-4",children:[e.jsx("div",{className:"hidden md:flex w-full md:w-x60"}),e.jsxs("div",{className:"flex-end w-1s/2 gap-2xx",children:[r&&e.jsx($e,{}),e.jsx(M,{className:"hidden md:flex"}),r&&e.jsx(ke,{user:r})]})]})]})}function Ie({title:t,children:a}){const{theme:r,updateTheme:n}=s.useContext(f);return e.jsxs(s.Fragment,{children:[e.jsx(V,{title:t}),e.jsx(ce,{}),(r==null?void 0:r.fullscreen)&&e.jsx(D,{}),e.jsx("div",{className:"hidden",children:e.jsx(z,{})}),e.jsx("div",{className:"min-h-screen flex-center bg-[#EDF2F9] dark:bg-[#0A1727]",children:e.jsxs("div",{className:`relative min-h-screen flex flex-col w-full ${r!=null&&r.fluidMode?r!=null&&r.fullscreen?"lg:px-0":"lg:px-4":"md:w-full lg:w-3/4 xl:px-0"}`,children:[!(r!=null&&r.fullscreen)&&e.jsx(ze,{}),e.jsx(fe,{}),e.jsxs("div",{className:"flex-grow flex gap-1 overflow-auto",children:[!(r!=null&&r.fullscreen)&&e.jsx(pe,{}),e.jsx("div",{className:`w-full h-full p-4 space-y-4 ${r!=null&&r.sidebarOpen?"lg:ml-60":r!=null&&r.fullscreen?"ml-0":"ml-8"}`,children:a})]})]})})]})}export{Ie as T};
