import{r as c,m as U,j as d,q as X,W as Z,f as ee}from"./app-144c7569.js";import{n as te,a as re,b as ae,M as V}from"./index.esm-b6d3ac2b.js";import{l as T,e as ne,S as Q,D as j,y as C,h as oe,o as y,d as se,u as G,f as E,X as A,I as O,p as Y,C as ie,g as ue,T as le,i as g,r as ce,j as N,_ as de,M as H,k as J,m as me,t as fe,n as pe,q as ve}from"./index.esm-0ff8ed9e.js";import{s as ge,b as he,u as xe,a as R,x as be}from"./CustomerMasterForm-77f7e4dd.js";import{G as L}from"./iconBase-a32b9c6a.js";import{P as ye}from"./StandardFormModalTemplate-156ebbc9.js";import{M as Ie,S as K,o as W,a as q}from"./ModelForm-32e1afd3.js";function Re({container:e,accept:u,walk:o,enabled:r=!0}){let a=c.useRef(u),n=c.useRef(o);c.useEffect(()=>{a.current=u,n.current=o},[u,o]),T(()=>{if(!e||!r)return;let i=ne(e);if(!i)return;let t=a.current,l=n.current,p=Object.assign(x=>t(x),{acceptNode:t}),h=i.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,p,!1);for(;h.nextNode();)l(h.currentNode)},[e,r,a,n])}var Se=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Se||{}),we=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(we||{}),Me=(e=>(e[e.OpenMenu=0]="OpenMenu",e[e.CloseMenu=1]="CloseMenu",e[e.GoToItem=2]="GoToItem",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterItem=5]="RegisterItem",e[e.UnregisterItem=6]="UnregisterItem",e))(Me||{});function B(e,u=o=>o){let o=e.activeItemIndex!==null?e.items[e.activeItemIndex]:null,r=me(u(e.items.slice()),n=>n.dataRef.current.domRef.current),a=o?r.indexOf(o):null;return a===-1&&(a=null),{items:r,activeItemIndex:a}}let De={1(e){return e.menuState===1?e:{...e,activeItemIndex:null,menuState:1}},0(e){return e.menuState===0?e:{...e,__demoMode:!1,menuState:0}},2:(e,u)=>{var o;let r=B(e),a=be(u,{resolveItems:()=>r.items,resolveActiveIndex:()=>r.activeItemIndex,resolveId:n=>n.id,resolveDisabled:n=>n.dataRef.current.disabled});return{...e,...r,searchQuery:"",activeItemIndex:a,activationTrigger:(o=u.trigger)!=null?o:1}},3:(e,u)=>{let o=e.searchQuery!==""?0:1,r=e.searchQuery+u.value.toLowerCase(),a=(e.activeItemIndex!==null?e.items.slice(e.activeItemIndex+o).concat(e.items.slice(0,e.activeItemIndex+o)):e.items).find(i=>{var t;return((t=i.dataRef.current.textValue)==null?void 0:t.startsWith(r))&&!i.dataRef.current.disabled}),n=a?e.items.indexOf(a):-1;return n===-1||n===e.activeItemIndex?{...e,searchQuery:r}:{...e,searchQuery:r,activeItemIndex:n,activationTrigger:1}},4(e){return e.searchQuery===""?e:{...e,searchQuery:"",searchActiveItemIndex:null}},5:(e,u)=>{let o=B(e,r=>[...r,{id:u.id,dataRef:u.dataRef}]);return{...e,...o}},6:(e,u)=>{let o=B(e,r=>{let a=r.findIndex(n=>n.id===u.id);return a!==-1&&r.splice(a,1),r});return{...e,...o,activationTrigger:1}}},z=c.createContext(null);z.displayName="MenuContext";function $(e){let u=c.useContext(z);if(u===null){let o=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(o,$),o}return u}function Pe(e,u){return G(u.type,De,e,u)}let ke=c.Fragment;function Fe(e,u){let{__demoMode:o=!1,...r}=e,a=c.useReducer(Pe,{__demoMode:o,menuState:o?0:1,buttonRef:c.createRef(),itemsRef:c.createRef(),items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1}),[{menuState:n,itemsRef:i,buttonRef:t},l]=a,p=C(u);oe([t,i],(I,S)=>{var f;l({type:1}),ue(S,le.Loose)||(I.preventDefault(),(f=t.current)==null||f.focus())},n===0);let h=y(()=>{l({type:1})}),x=c.useMemo(()=>({open:n===0,close:h}),[n,h]),v={ref:p};return U.createElement(z.Provider,{value:a},U.createElement(se,{value:G(n,{0:E.Open,1:E.Closed})},A({ourProps:v,theirProps:r,slot:x,defaultTag:ke,name:"Menu"})))}let Te="button";function Ee(e,u){var o;let r=O(),{id:a=`headlessui-menu-button-${r}`,...n}=e,[i,t]=$("Menu.Button"),l=C(i.buttonRef,u),p=Y(),h=y(f=>{switch(f.key){case g.Space:case g.Enter:case g.ArrowDown:f.preventDefault(),f.stopPropagation(),t({type:0}),p.nextFrame(()=>t({type:2,focus:R.First}));break;case g.ArrowUp:f.preventDefault(),f.stopPropagation(),t({type:0}),p.nextFrame(()=>t({type:2,focus:R.Last}));break}}),x=y(f=>{switch(f.key){case g.Space:f.preventDefault();break}}),v=y(f=>{if(ce(f.currentTarget))return f.preventDefault();e.disabled||(i.menuState===0?(t({type:1}),p.nextFrame(()=>{var b;return(b=i.buttonRef.current)==null?void 0:b.focus({preventScroll:!0})})):(f.preventDefault(),t({type:0})))}),I=c.useMemo(()=>({open:i.menuState===0}),[i]),S={ref:l,id:a,type:ge(e,i.buttonRef),"aria-haspopup":"menu","aria-controls":(o=i.itemsRef.current)==null?void 0:o.id,"aria-expanded":i.menuState===0,onKeyDown:h,onKeyUp:x,onClick:v};return A({ourProps:S,theirProps:n,slot:I,defaultTag:Te,name:"Menu.Button"})}let je="div",Ce=Q.RenderStrategy|Q.Static;function Ae(e,u){var o,r;let a=O(),{id:n=`headlessui-menu-items-${a}`,...i}=e,[t,l]=$("Menu.Items"),p=C(t.itemsRef,u),h=te(t.itemsRef),x=Y(),v=ie(),I=(()=>v!==null?(v&E.Open)===E.Open:t.menuState===0)();c.useEffect(()=>{let s=t.itemsRef.current;s&&t.menuState===0&&s!==(h==null?void 0:h.activeElement)&&s.focus({preventScroll:!0})},[t.menuState,t.itemsRef,h]),Re({container:t.itemsRef.current,enabled:t.menuState===0,accept(s){return s.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:s.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(s){s.setAttribute("role","none")}});let S=y(s=>{var D,k;switch(x.dispose(),s.key){case g.Space:if(t.searchQuery!=="")return s.preventDefault(),s.stopPropagation(),l({type:3,value:s.key});case g.Enter:if(s.preventDefault(),s.stopPropagation(),l({type:1}),t.activeItemIndex!==null){let{dataRef:m}=t.items[t.activeItemIndex];(k=(D=m.current)==null?void 0:D.domRef.current)==null||k.click()}J(t.buttonRef.current);break;case g.ArrowDown:return s.preventDefault(),s.stopPropagation(),l({type:2,focus:R.Next});case g.ArrowUp:return s.preventDefault(),s.stopPropagation(),l({type:2,focus:R.Previous});case g.Home:case g.PageUp:return s.preventDefault(),s.stopPropagation(),l({type:2,focus:R.First});case g.End:case g.PageDown:return s.preventDefault(),s.stopPropagation(),l({type:2,focus:R.Last});case g.Escape:s.preventDefault(),s.stopPropagation(),l({type:1}),N().nextFrame(()=>{var m;return(m=t.buttonRef.current)==null?void 0:m.focus({preventScroll:!0})});break;case g.Tab:s.preventDefault(),s.stopPropagation(),l({type:1}),N().nextFrame(()=>{de(t.buttonRef.current,s.shiftKey?H.Previous:H.Next)});break;default:s.key.length===1&&(l({type:3,value:s.key}),x.setTimeout(()=>l({type:4}),350));break}}),f=y(s=>{switch(s.key){case g.Space:s.preventDefault();break}}),b=c.useMemo(()=>({open:t.menuState===0}),[t]),M={"aria-activedescendant":t.activeItemIndex===null||(o=t.items[t.activeItemIndex])==null?void 0:o.id,"aria-labelledby":(r=t.buttonRef.current)==null?void 0:r.id,id:n,onKeyDown:S,onKeyUp:f,role:"menu",tabIndex:0,ref:p};return A({ourProps:M,theirProps:i,slot:b,defaultTag:je,features:Ce,visible:I,name:"Menu.Items"})}let $e=c.Fragment;function Be(e,u){let o=O(),{id:r=`headlessui-menu-item-${o}`,disabled:a=!1,...n}=e,[i,t]=$("Menu.Item"),l=i.activeItemIndex!==null?i.items[i.activeItemIndex].id===r:!1,p=c.useRef(null),h=C(u,p);T(()=>{if(i.__demoMode||i.menuState!==0||!l||i.activationTrigger===0)return;let m=N();return m.requestAnimationFrame(()=>{var w,P;(P=(w=p.current)==null?void 0:w.scrollIntoView)==null||P.call(w,{block:"nearest"})}),m.dispose},[i.__demoMode,p,l,i.menuState,i.activationTrigger,i.activeItemIndex]);let x=he(p),v=c.useRef({disabled:a,domRef:p,get textValue(){return x()}});T(()=>{v.current.disabled=a},[v,a]),T(()=>(t({type:5,id:r,dataRef:v}),()=>t({type:6,id:r})),[v,r]);let I=y(()=>{t({type:1})}),S=y(m=>{if(a)return m.preventDefault();t({type:1}),J(i.buttonRef.current)}),f=y(()=>{if(a)return t({type:2,focus:R.Nothing});t({type:2,focus:R.Specific,id:r})}),b=xe(),M=y(m=>b.update(m)),s=y(m=>{b.wasMoved(m)&&(a||l||t({type:2,focus:R.Specific,id:r,trigger:0}))}),D=y(m=>{b.wasMoved(m)&&(a||l&&t({type:2,focus:R.Nothing}))}),k=c.useMemo(()=>({active:l,disabled:a,close:I}),[l,a,I]);return A({ourProps:{id:r,ref:h,role:"menuitem",tabIndex:a===!0?void 0:-1,"aria-disabled":a===!0?!0:void 0,disabled:void 0,onClick:S,onFocus:f,onPointerEnter:M,onMouseEnter:M,onPointerMove:s,onMouseMove:s,onPointerLeave:D,onMouseLeave:D},theirProps:n,slot:k,defaultTag:$e,name:"Menu.Item"})}let _e=j(Fe),Ne=j(Ee),Oe=j(Ae),Le=j(Be),F=Object.assign(_e,{Button:Ne,Items:Oe,Item:Le});function ze({children:e}){const[u,o]=c.useState({top:0,right:0}),r=c.useRef(null);return c.useEffect(()=>{function a(){if(r.current){const n=r.current.getBoundingClientRect(),i=window.innerHeight,t=window.innerWidth-n.right;let l=0;n.y<10?l=100:i-n.bottom<=200&&(l=220);const p=n.bottom-l;o({top:p,right:t})}}a()},[]),d.jsx(F,{as:"div",children:({open:a,close:n})=>(a&&window.addEventListener("scroll",n),d.jsxs(c.Fragment,{children:[d.jsx(F.Button,{ref:r,className:"flex-center gap-2 font-semibold px-4 py-1 rounded-md button-shadow text-gray-600 dark:text-white dark:bg-[#0B1727]",children:d.jsx(re,{})}),d.jsx(fe,{as:c.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:d.jsx(F.Items,{className:"absolute righxt-0 mt-0 w-56 origin-top-right divide-y divide-gray-100 rounded-md z-10 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none bg-slate-700 text-white dark:bg-white dark:text-gray-700  ",children:d.jsx("div",{className:"px-1 py-1 ",children:e})})})]}))})}const _=c.forwardRef(function({disabled:u,icon:o,label:r,onClick:a,deleteAction:n=!1,processing:i=!1},t){return t||c.useRef(),d.jsxs("button",{className:`group flex-between w-full items-center rounded-md px-2 py-2 text-sm  dark:hover:text-white gap-2 ${n?"hover:bg-rose-500":"hover:bg-primary"} disabled:hover:bg-gray-300 disabled:text-gray-400`,onClick:a,disabled:u,children:[d.jsxs("div",{className:"flex-start gap-2",children:[o,r]}),i&&d.jsx(pe,{className:"animate-spin"})]})});function Ue(e){return L({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M16 2H8C4.691 2 2 4.691 2 8v13a1 1 0 0 0 1 1h13c3.309 0 6-2.691 6-6V8c0-3.309-2.691-6-6-6zm4 14c0 2.206-1.794 4-4 4H4V8c0-2.206 1.794-4 4-4h8c2.206 0 4 1.794 4 4v8z"}},{tag:"path",attr:{d:"M7 14.987v1.999h1.999l5.529-5.522-1.998-1.998zm8.47-4.465-1.998-2L14.995 7l2 1.999z"}}]})(e)}function Je(e){return L({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M19 11h-6V5h-2v6H5v2h6v6h2v-6h6z"}}]})(e)}function Xe(e){return L({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 16c1.671 0 3-1.331 3-3s-1.329-3-3-3-3 1.331-3 3 1.329 3 3 3z"}},{tag:"path",attr:{d:"M20.817 11.186a8.94 8.94 0 0 0-1.355-3.219 9.053 9.053 0 0 0-2.43-2.43 8.95 8.95 0 0 0-3.219-1.355 9.028 9.028 0 0 0-1.838-.18V2L8 5l3.975 3V6.002c.484-.002.968.044 1.435.14a6.961 6.961 0 0 1 2.502 1.053 7.005 7.005 0 0 1 1.892 1.892A6.967 6.967 0 0 1 19 13a7.032 7.032 0 0 1-.55 2.725 7.11 7.11 0 0 1-.644 1.188 7.2 7.2 0 0 1-.858 1.039 7.028 7.028 0 0 1-3.536 1.907 7.13 7.13 0 0 1-2.822 0 6.961 6.961 0 0 1-2.503-1.054 7.002 7.002 0 0 1-1.89-1.89A6.996 6.996 0 0 1 5 13H3a9.02 9.02 0 0 0 1.539 5.034 9.096 9.096 0 0 0 2.428 2.428A8.95 8.95 0 0 0 12 22a9.09 9.09 0 0 0 1.814-.183 9.014 9.014 0 0 0 3.218-1.355 8.886 8.886 0 0 0 1.331-1.099 9.228 9.228 0 0 0 1.1-1.332A8.952 8.952 0 0 0 21 13a9.09 9.09 0 0 0-.183-1.814z"}}]})(e)}function Ve({row:e,withUpdate:u=!0,withDelete:o=!0,withRestore:r=!0}){const{page:a,permissions:n}=X().props,{module:i,slug:t,routes:l}=a,[p,h]=c.useState("update"),[x,v]=c.useState(!1),[I,S]=c.useState(null),[f,b]=c.useState(!1),M=Z({id:e.id}),s=()=>{v(!0);const m=route(l.edit,[t,e.id]),w={form_action:p};ee.get(m,{params:w}).then(P=>{S(P.data),v(!1),b(!0)}).catch(P=>(v(!1),P.response.status==422?alert(P.response.data.msg):alert("Terjadi masalah, tidak dapat membuka form")))};function D(){K.fire({title:"Do you want to delete this data?",showConfirmButton:!1,showDenyButton:!0,showCancelButton:!0,denyButtonText:"Yes, Delete!",icon:"warning"}).then(m=>{m.isDenied&&M.delete(route(l.destroy,[t,e.id]),{preserveScroll:!0,onSuccess:w=>W(w,()=>{},!0),onError:q})})}function k(){K.fire({title:"Do you want to restore this data?",showConfirmButton:!0,showCancelButton:!0,confirmButtonText:"Yes, Restore",icon:"warning"}).then(m=>{m.isConfirmed&&M.post(route(l.restore,[t,e.id]),{preserveScroll:!0,onSuccess:w=>W(w,()=>{},!0),onError:q})})}return d.jsxs(c.Fragment,{children:[d.jsxs(ze,{children:[u&&!e.deleted_at&&d.jsx(F.Item,{children:({active:m})=>d.jsx(_,{icon:d.jsx(Ue,{size:20}),label:"Update Data",onClick:()=>{h("update"),s()},disabled:!n.canUpdate})}),o&&!e.deleted_at&&d.jsx(F.Item,{children:({active:m})=>d.jsx(_,{icon:d.jsx(ae,{size:20}),label:"Delete Data",onClick:()=>D(),disabled:!n.canDestroy})}),r&&e.deleted_at&&d.jsx(F.Item,{children:({active:m})=>d.jsx(_,{icon:d.jsx(ve,{size:20}),label:"Restore Data",onClick:()=>k(),disabled:!n.canUpdate})})]}),d.jsx(V,{visible:x,setVisible:v,noescape:!0,children:d.jsx(ye,{visible:x})}),d.jsx(V,{visible:f,setVisible:b,noescape:!0,children:d.jsx(Ie,{action:p,loadData:I,closeForm:()=>b(!1)})})]})}const Ze=Object.freeze(Object.defineProperty({__proto__:null,default:Ve},Symbol.toStringTag,{value:"Module"}));export{Xe as B,Ve as M,Je as a,Ze as b};
